<?xml version="1.0" encoding="UTF-8"?>
<vxml version = "2.1">
<meta name="maintainer" content="erniecyc@gmail.com" />
<property name="grammarfetchint" value="prefetch" />
<form id="City">
		<block>
			<prompt bargein="false"> Hi, my name is Gina </prompt>
		</block>

  <field name="City">
   <prompt>
     how are you today? Which city are you located?
   </prompt>
  <!-- Define the grammar. -->
  <grammar xml:lang="en-us" root = "myrule">
   <rule id="myrule">
   <one-of>
    <item> Seattle </item>
    <item> San Diego </item>
    </one-of>
   </rule>
   </grammar>
   <!-- The user was silent, restart the field. -->
   <noinput>
    I did not hear anything. Please try again.
    <reprompt/>
   </noinput>
   <!-- The user said something that was not defined in our grammar. -->
   <nomatch>
     I did not recognize that character. Please try again.
    <reprompt/>
   </nomatch>
  </field>

  <!-- Checks the "City" value against each of the valid values. -->
  <filled namelist="City">
  <if cond="City == 'Seattle'"> 
   <prompt>
     Seattle sounds like a cool place!  
   </prompt>
   <goto next="#State"/>
  <elseif cond="City == 'San Diego'" />
   <prompt>
     It's a beautiful place! 
   </prompt>
   <goto next="#State"/> 
  <else/>
   <prompt>
     I'm sure you live on Mars!
   </prompt>
  </if> 
</filled>

</form>

<form id="State">
		<block>
			<prompt bargein="false"> We will also need to know which state you live in.  </prompt>
		</block>
  <field name="State">
   <prompt>
     Which state do you live in?
   </prompt>
  <!-- Define the grammar. -->
  <grammar xml:lang="en-us" root = "myrule">
   <rule id="myrule">
   <one-of>
    <item> Washington </item>
    <item> California </item>
    </one-of>
   </rule>
   </grammar>
   <!-- The user was silent, restart the field. -->
   <noinput>
    I did not hear anything. Please try again.
    <reprompt/>
   </noinput>
   <!-- The user said something that was not defined in our grammar. -->
   <nomatch>
     I did not recognize that character. Please try again.
    <reprompt/>
   </nomatch>
  </field>

  <!-- Checks the "State" value against each of the valid values. -->
  <filled namelist="State">
  <if cond="State == 'Washington'"> 
   <goto next="#ForecastW"/>
  <elseif cond="State == 'California'" />
   <goto next="#ForecastC"/>
  <else/>
   <prompt>
     That's interesting!
   </prompt>
  </if> 
</filled>
</form>	

<form id="ForecastC">
  <field name="ForecastC">
   <prompt>
     Please choose from the following options. Do you want to weather forecast currently, shor-term or the long-term.
     For current weather, say one. For short-term weather, say two. For the long-term weather, say three.
   </prompt>
  <!-- Define the grammar. -->
  <grammar xml:lang="en-us" root = "myrule">
   <rule id="myrule">
   <one-of>
    <item> one </item>
    <item> two </item>
    <item> three </item>
    </one-of>
   </rule>
   </grammar>
   <!-- The user was silent, restart the field. -->
   <noinput>
    I did not hear anything. Please try again.
    <reprompt/>
   </noinput>
   <!-- The user said something that was not defined in our grammar. -->
   <nomatch>
     I did not recognize that character. Please try again.
    <reprompt/>
   </nomatch>
  </field>

  <!-- Checks the "ForecastC" value against each of the valid values. -->
  <filled namelist="ForecastC">
  <if cond="ForecastC == 'one'"> 
   <prompt>
     The weather in sunshine San Diego California currently is sunny. 
     Have a nice day!
   </prompt>
  <elseif cond="ForecastC == 'two'" />
   <prompt>
     The weather in sunshine San Diego California is mostly sunny.
     Have a nice day!
   </prompt>
  <else/>
   <prompt>
     The weather in sunshine San Diego California is always sunny!
     Have a nice day!
   </prompt>
  </if> 
</filled>
</form>	

<form id="ForecastW">
  <field name="ForecastW">
   <prompt>
     Please choose from the following options. Do you want to weather forecast currently, shor-term or the long-term.
     For current weather, say one. For short-term weather, say two. For the long-term weather, say three.
   </prompt>
  <!-- Define the grammar. -->
  <grammar xml:lang="en-us" root = "myrule">
   <rule id="myrule">
   <one-of>
    <item> one </item>
    <item> two </item>
    <item> three </item>
    </one-of>
   </rule>
   </grammar>
   <!-- The user was silent, restart the field. -->
   <noinput>
    I did not hear anything. Please try again.
    <reprompt/>
   </noinput>
   <!-- The user said something that was not defined in our grammar. -->
   <nomatch>
     I did not recognize that character. Please try again.
    <reprompt/>
   </nomatch>
  </field>

  <!-- Checks the "ForecastW" value against each of the valid values. -->
  <filled namelist="ForecastW">
  <if cond="ForecastW == 'one'"> 
   <prompt>
     It is currently raining now in Seattle Washington currently.
     Have a nice day!
   </prompt>
  <elseif cond="ForecastW == 'two'" />
   <prompt>
     It will be raining in Seattle Washington.
     Have a nice day!
   </prompt>
  <else/>
   <prompt>
     It will always be raining in Seattle Washington.
     Have a nice day!
   </prompt>
  </if> 
</filled>
</form>	

</vxml>











<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE vxml PUBLIC "-//W3C//DTD VOICEXML 2.1//EN" "http://www.w3.org/TR/2007/REC-voicexml21-20070619/vxml.dtd">
<vxml version="2.1">
 
<!-- Document level grammar result for the result form -->
<var name="doc_result" />
<form id="frm_main">
 
  <!-- this is a document level grammar -->
  <grammar type="text/gsl" scope="document">
   <![CDATA[
    [
     ( [one dtmf-1] ) { <doc "one"> }
     ( [two dtmf-2] ) { <doc "two"> }
     ( [exit dtmf-0] ) { <doc "term"> }
    ]
   ]]>
  </grammar>
 
  <!-- Our document level grammar was filled
     send the user to the next form -->
  <filled namelist="doc">
   <assign name="doc_result" expr="doc" />
   <goto next="#frm_doc_filled" />
  </filled>
 
  <!-- Get some input for the local grammar field -->
  <field name="field1" >
 
   <!-- This is a local grammar -->
   <grammar type="text/gsl">
    <![CDATA[
     [
      ( [three dtmf-3] ) { <field1 "three"> }
      ( [four dtmf-4] ) { <field1 "four"> }
     ]
    ]]>
   </grammar>
 
   <!-- This is the main menu prompt -->
   <prompt>
    Hi, this is Gina, the weather broadcaster. 
    Press one or two for the document level grammar to answer
    Enter three or four for the dialog or local level grammar to answer
    If you press zero the document level grammar will say goodbye and hangup
   </prompt>
  </field>
 
  <!-- our local grammar was filled -->
  <filled namelist="field1">
   <prompt>
    You said <value expr="field1" />
    <break time="1000ms" />
   </prompt>
 
   <!-- Loop Back to main -->
   <goto next="#frm_main" />
  </filled>
 
  <!-- Set up an empty field to grab the document level grammar data -->
  <field name="doc" />
</form>
 
<!-- Create a new form for the filled document scope grammar -->
<form id="frm_doc_filled">
  <block>
   <prompt>
    This is the document level grammar answering
    You said <value expr="doc_result" />
   </prompt>
 
   <!-- Check to see if we got a 0 for hangup -->
   <if cond="doc_result == 'term'">
    <prompt>
     Goodbye
    </prompt>
 
    <!-- Exit the application -->
    <exit />
 
   <else />
    <prompt>
     Going back to the main form
    </prompt>
    <goto next="#frm_main" />
   </if>
  </block>
</form>
</vxml>




